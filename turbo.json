{
  "$schema": "https://turbo.build/schema.json",
  "tasks": {
    "build": {
      "env": [ "RUNNER_OS", "RUNNER_ARCH", "TEST_RUN" ],
      "inputs": [ 
        "$TURBO_DEFAULT$", 
        "!./pkg-*.tgz", 
        "!./pydist/**", 
        "../shared-config.json",
        "../builder/src/**",
        "../builder/docker/**",
        "../builder/tsconfig.json",
        "../builder/package.json",
        "../checker/check_native_imports.py",
        "../checker/whitelists/**/*.json"
      ],
      "outputs": [ "./dist/**" ],

      "passThroughEnv": [
        "PL_REGISTRY_PLATFORMA_OPEN_UPLOAD_URL",
        "AWS_DEFAULT_REGION",
        "AWS_ACCESS_KEY_ID",
        "AWS_SECRET_ACCESS_KEY",
        "AWS_SESSION_TOKEN"
      ]
    },
    "after-prebuild": {
      "dependsOn": ["^build"],
      "env": [ "RUNNER_OS", "RUNNER_ARCH", "TEST_RUN" ],
      "inputs": [ "$TURBO_DEFAULT$", "!./pkg-*.tgz", "!./pydist/**", "../shared-config.json", "../scripts/**" ],
      "outputs": [ "./dist/**" ],

      "passThroughEnv": [
        "PL_REGISTRY_PLATFORMA_OPEN_UPLOAD_URL",
        "AWS_DEFAULT_REGION",
        "AWS_ACCESS_KEY_ID",
        "AWS_SECRET_ACCESS_KEY",
        "AWS_SESSION_TOKEN"
      ]
    }
  }
}
